
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
    max-connections: 1000
    max-connections-per-route: 200
hystrix:
  share-security-context: true
  command:
    default:
      execution:
        isolation:
          thread:
            timeoutInMilliseconds: 10000
          strategy: SEMAPHORE
          semaphore:
            # Practically max int, but Hystrix needs an actual value. The default would be 10.
            # We do rate-limiting separately using a custom org.springframework.cloud.gateway.filter.ratelimit.AbstractRateLimiter based on resilience4j 
            maxConcurrentRequests: 100000
security:
  oauth2:
    resource:
      user-info-uri: http://api-gateway:8000/api/uaa/current
      id: ${spring.application.name:}
      filter-order: 500
    client:
      clientId: server
      clientSecret: server
      accessTokenUri: http://api-gateway:8000/api/uaa/oauth/token
      grantType: client_credentials
      grant_type: client_credentials
      scope: server
spring:
  rabbitmq:
    host: trip-rabbitmq
    port: 5672
    username: ${RABBITMQ_SERVER_USERNAME:guest}
    password: ${RABBITMQ_SERVER_PASSWORD:guest}
  sleuth:
    sampler:
      percentage: 1
  cloud:
    stream:
      bindings:
        hystrixStreamOutput:
          destination: springCloudHystrixStream
  datasource:
    url: jdbc:mysql://localhost:3308/yuke-cloud?characterEncoding=utf-8&autoReconnect=true&AllowPublicKeyRetrieval=True&useSSL=false&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai&zeroDateTimeBehavior=CONVERT_TO_NULL
    username: ${MYSQL_SERVER_USERNAME:root}
    password: ${MYSQL_SERVER_PASSWORD:123456}
    type: com.alibaba.druid.pool.DruidDataSource
    driver-class-name: com.mysql.cj.jdbc.Driver
    driverClassName: com.mysql.cj.jdbc.Driver
    db-name: trip
  redis:
    host: trip-redis
    port: 6379
    password: ${REDIS_SERVER_PASSWORD:admin}
    database: 8
    timeout: 0
    jedis:
      pool:
        max-active: 200
        max-wait: 50
        max-idle: 100
        min-idle: 20

trip:
  swagger2:
    enable: true
    base-package: com.yuke.trip
    title : trip-Cloud
    description: trip cloud Restful API docs
    termsOfServiceUrl : http://localhost:4000
    version: 1.0
    apiName: Authorization
    apiKeyName: Authorization
  session:
    single: true #为true时只允许同一允许单session访问
eureka:
  client:
    healthcheck:
      enabled: true
  instance:
    metadata-map:
      management.context-path: ${server.context-path:}
server:
  tomcat:
    max-threads: 1000
    min-spare-threads: 64
    max-connections: 2000
